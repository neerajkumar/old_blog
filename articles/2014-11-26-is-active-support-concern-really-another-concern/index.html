<html><head><title>Is ActiveSupport::Concern really Another Concern? -Neeraj Kumar (neerajk.com)</title><meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport"/><meta content="Is ActiveSupport::Concern really Another Concern?" name="description"/><meta content="ruby,rails,active_support" name="keywords"/><meta charset="utf-8"/><meta content="IE=edge;chrome=1"/><meta http-equiv="X-UA-Compatible"/><meta name="google-site-verification" content="CP2bDcK0ilZ3tVzYdhC395hZhY--3EUkWtyxGFIbKLk"/><!--meta(http-equiv="content-type", content='width=device-width, initial-scale=1.0, charset=utf-8')--><link rel="SHORTCUT ICON" href="http://blog.neerajk.com/assets/images/13.jpg"/><link rel="stylesheet" href="http://blog.neerajk.com/assets/css/github.css"/><link rel="stylesheet" media="screen" href="http://blog.neerajk.com/assets/bootstrap/css/bootstrap.min.css"/><style type="text/css">body {
    padding-top: 60px;
    padding-bottom: 40px;
}
h1 {
    font-size: 2em;
}
h2 {
    font-size: 1.8em;
}
h3 {
    font-size: 1.7em;
}

@media only screen
and (min-width : 768px)
and (max-width : 995px) {
  h3 {
        font-size: 1.2em;
  }
}
</style><link rel="stylesheet" href="http://blog.neerajk.com/assets/css/prettify.css"/><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=ABeeZee&amp;subset=latin"/><link rel="stylesheet" href="http://blog.neerajk.com/assets/css/app.css"/></head><meta name="google-site-verification" content="CP2bDcK0ilZ3tVzYdhC395hZhY--3EUkWtyxGFIbKLk"/><body><div class="container"><div class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="http://blog.neerajk.com" class="navbar-brand">Neeraj Kumar</a><buttona type="button" data-toggle="collapse" data-target="#navbar-main" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></buttona></div><div id="navbar-main" class="navbar-collapse collapse"><!-- .nav, .navbar-search, .navbar-form, etc --><ul class="nav navbar-nav"><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Tags<b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://blog.neerajk.com/tag/active_support.html">active_support</a></li><li><a href="http://blog.neerajk.com/tag/ActiveRecord.html">ActiveRecord</a></li><li><a href="http://blog.neerajk.com/tag/ActiveResource.html">ActiveResource</a></li><li><a href="http://blog.neerajk.com/tag/ActiveResourceAssociatable.html">ActiveResourceAssociatable</a></li><li><a href="http://blog.neerajk.com/tag/ActiveResourceChangeable.html">ActiveResourceChangeable</a></li><li><a href="http://blog.neerajk.com/tag/ampersand.js.html">ampersand.js</a></li><li><a href="http://blog.neerajk.com/tag/basecamp.html">basecamp</a></li><li><a href="http://blog.neerajk.com/tag/campfire.html">campfire</a></li><li><a href="http://blog.neerajk.com/tag/capistrano.html">capistrano</a></li><li><a href="http://blog.neerajk.com/tag/git.html">git</a></li><li><a href="http://blog.neerajk.com/tag/hubot.html">hubot</a></li><li><a href="http://blog.neerajk.com/tag/jeremy evans.html">jeremy evans</a></li><li><a href="http://blog.neerajk.com/tag/rails.html">rails</a></li><li><a href="http://blog.neerajk.com/tag/Roda.html">Roda</a></li><li><a href="http://blog.neerajk.com/tag/ruby.html">ruby</a></li><li><a href="http://blog.neerajk.com/tag/spa.html">spa</a></li><li><a href="http://blog.neerajk.com/tag/svn.html">svn</a></li></ul></li><li><a href="http://blog.neerajk.com/archive.html">Archive</a></li></ul><form id="search-form" action="http://www.google.com/search" method="get" class="navbar-form pull-right"><span class="glass js-search-action"><i></i></span><input type="hidden" value="UTF-8" name="ie"/><input type="hidden" value="UTF-8" name="oe"/><input type="hidden" value="blog.neerajk.com" name="domains"/><input type="hidden" value="blog.neerajk.com" name="sitesearch"/><input name="q" type="text" placeholder="Search using Google..." class="search-query span2"/></form></div></div></div><div class="row"><div class="col-lg-9 col-sm-9"><article class="post shadow"><div><h1>Is ActiveSupport::Concern really Another Concern?</h1><footer class="footer"><div style="font-size: 13px" class="inner">Posted by&nbsp;<span class="author"><a href="mailto:neeraj.kumar@gmail.com">Neeraj Kumar</a></span>| on&nbsp;<a href="http://blog.neerajk.com/archive.html" class="back">November 26, 2014&nbsp;</a>| Tags :&nbsp;<a href="http://blog.neerajk.com/tag/ruby.html" rel="category tag" title="View all posts in 'ruby'">ruby </a><a href="http://blog.neerajk.com/tag/rails.html" rel="category tag" title="View all posts in 'rails'">rails </a><a href="http://blog.neerajk.com/tag/active_support.html" rel="category tag" title="View all posts in 'active_support'">active_support </a></div></footer></div><hr/><section class="content"><p>In Ruby world, <a href="/articles/2014-11-26-is-active-support-concern-really-another-concern/guides.rubyonrails.org">Rails</a> is a well known web-framework and <a href="https://github.com/rails/rails/tree/master/activesupport">ActiveSupport</a> is an integrated component. <a href="https://github.com/rails/rails/tree/master/activesupport">ActiveSupport</a> is a ruby gem which comes with rails by default. But, we can also use this library or gem separately. <a href="https://github.com/rails/rails/tree/master/activesupport">ActiveSupport</a> is very easy to understand upto the extend that if you are planning to read the source code of rails, then start with <a href="https://github.com/rails/rails/tree/master/activesupport">ActiveSupport</a>. So, today I am going to throw some light on <a href="https://github.com/rails/rails/blob/master/activesupport/lib/active_support/concern.rb">ActiveSupport::Concern</a> which is also one of the component of <a href="https://github.com/rails/rails/tree/master/activesupport">ActiveSupport</a>. Is ActiveSupport::Concern really Another Concern?</p>
<p>This post is for those who are new to ActiveSupport. Who constantly do utility work like encoding, or decoding JSON, generating random number, number to currency conversion etc. But never got the chance to find out the reason behind this. Have you ever looked into the source code of any rubygem where you found the statement like <code>extend ActiveSupport::Concern</code>. If yes, are you familiar with this statement? Why do we use this? Trust me <a href="https://github.com/rails/rails/blob/master/activesupport/lib/active_support/concern.rb">ActiveSupport::Concern</a> is not a concern, but to make your life easy. </p>
<p>ActiveSupport::Concern is useful in mixin or modules. It is more useful whenever you are building your own rubygem. </p>
<h3 id="without-activesupport-concern">Without ActiveSupport::Concern</h3>
<hr>
<p>We can definitely achieve our goals without ActiveSupport::Concern. But it will insist you to write more code and introduce more complexity in your code base.  </p>
<pre><code class="lang-ruby"><span class="comment"># my Foo mixin or module</span>
<span class="class"><span class="keyword">module</span> <span class="title">Foo</span></span>
  <span class="class"><span class="keyword">module</span> <span class="title">ClassMethods</span></span>
    <span class="function"><span class="keyword">def</span> <span class="title">class_method</span></span>
      puts <span class="string">"I am inside bar method"</span>
    <span class="keyword">end</span>
  <span class="keyword">end</span>

  <span class="class"><span class="keyword">module</span> <span class="title">InstanceMethods</span></span>
    <span class="function"><span class="keyword">def</span> <span class="title">instance_method</span></span>
      puts <span class="string">"I am inside foo method"</span>
    <span class="keyword">end</span>
  <span class="keyword">end</span>

  <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">included</span><span class="params">(base)</span></span>
    base.send <span class="symbol">:include</span>, InstanceMethods
    base.send <span class="symbol">:extend</span>, ClassMethods
    puts <span class="string">"FooBar included"</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<pre><code class="lang-ruby"><span class="comment"># my Bar class</span>
<span class="class"><span class="keyword">class</span> <span class="title">Bar</span></span>
  <span class="keyword">include</span> Foo
<span class="keyword">end</span>

Bar.class_method
Bar.new.instance_method
</code></pre>
<p>Here I created a Foo module and included this module into my Bar class. Whenever <code>include Foo</code> will execute, it will trigger my overridden method <code>self.included(base)</code> method in Foo module. base is the reference of the class in which I have included my module. And then Inside <code>self.included(base)</code>, I am manually including and extending my ClassMethods and InstanceMethonds.</p>
<p>But I could say that this is not a good code. Why? Because first, I am over-ridding included method which is not good. Second, it is decreasing the readability of code. People have to struggle with code in order to understand the whole process.</p>
<h3 id="with-activesupport-concern">With ActiveSupport::Concern</h3>
<p>Now the same code could be written with the help of ActiveSupport::Concern. Trust me it will reduce the complexity and increase the readability. </p>
<pre><code class="lang-ruby"><span class="comment"># my Foo mixin or module</span>
<span class="keyword">require</span> <span class="string">'active_support/concern.rb'</span>

<span class="class"><span class="keyword">module</span> <span class="title">Foo</span></span>
  extend ActiveSupport::Concern

  <span class="class"><span class="keyword">module</span> <span class="title">ClassMethods</span></span>
    <span class="function"><span class="keyword">def</span> <span class="title">class_method</span></span>
      puts <span class="string">"I am inside bar method"</span>
    <span class="keyword">end</span>
  <span class="keyword">end</span>

  <span class="function"><span class="keyword">def</span> <span class="title">instance_method</span></span>
    puts <span class="string">"I am inside foo method"</span>
  <span class="keyword">end</span>

  included <span class="keyword">do</span>
    puts <span class="string">"FooBar included"</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
</code></pre>
<pre><code class="lang-ruby"><span class="comment"># my Bar class</span>
<span class="class"><span class="keyword">class</span> <span class="title">Bar</span></span>
  <span class="keyword">include</span> Foo
<span class="keyword">end</span>

Bar.class_method
Bar.new.instance_method
</code></pre>
<p>module <code>InstanceMethods</code> is also removed because methods inside Foo module will come under <code>InstanceMethods</code> module by default. You can also notice that <code>self.included(base)</code> is also changed to included only. Now You can override included method for your other useful purpose.</p>
</section><hr/><div id="social_bottom" class="topsocial"><div class="social"><a href="/articles/2014-11-26-is-active-support-concern-really-another-concern/" data-url="http://blog.neerajk.com/articles/2014-11-26-is-active-support-concern-really-another-concern/" data-text="Is ActiveSupport::Concern really Another Concern? #ruby #rails #active_support /via @bundlexec" data-count="vertical" class="twitter-share-button"><twitter-share-button></twitter-share-button></a><script src="//platform.twitter.com/widgets.js"></script></div><div class="social"><g:plusone size="tall" href="http://blog.neerajk.com/articles/2014-11-26-is-active-support-concern-really-another-concern/"></g:plusone></div><div class="social"><script type="IN/Share" data-url="http://blog.neerajk.com/articles/2014-11-26-is-active-support-concern-really-another-concern/" data-counter="top"></script></div><div class="social"><div data-href="http://blog.neerajk.com/articles/2014-11-26-is-active-support-concern-really-another-concern/" data-width="450" data-layout="box_count" data-show-faces="true" data-send="false" class="fb-like"></div></div></div><hr/><h3>Similar Articles</h3><table class="table table-striped"><tbody><tr><td><a href="/articles/2013-12-27-Ruby-oci8_with-rails/" title="ruby">Ruby-oci8 with Rails</a></td></tr><tr><td><a href="/articles/2014-03-15-Migration-from-svn-to-git/" title="ruby,git,svn">Successful Migration from svn to git with history</a></td></tr><tr><td><a href="/articles/2014-06-18-Smart-Deployment-using-Hubot/" title="ruby,rails,hubot,capistrano,basecamp,campfire">Smart Deployment using Hubot</a></td></tr><tr><td><a href="/articles/2016-07-31-roda-versus-rails/" title="ruby,rails,Roda,jeremy evans">Roda versus Rails</a></td></tr><tr><td><a href="/articles/2016-12-06-active-resource-changeable/" title="ruby,rails,ActiveRecord,ActiveResource,ActiveResourceChangeable">Active Resource Changeable</a></td></tr></tbody></table><h4></h4><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = 'neerajkumar';
(function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a></article></div><div id="sidebar" class="col-lg-3 col-sm-3"><div class="sidebar-header"><a href="http://blog.neerajk.com/about.html"><img src="/assets/images/13.jpg" class="img-circle img-responsive"/></a><hr/><h3><p class="pull-right"><a href="http://blog.neerajk.com/about.html"></a></p><P><a href="http://blog.neerajk.com/about.html">About</a></P></h3><hr/><h3><p class="pull-right"><a href="http://blog.neerajk.com/about.html#awards-and-honors"></a></p><P><a href="http://blog.neerajk.com/about.html#awards-and-honors">Award and Honors</a></P></h3><hr/><h3><p class="pull-right"><a href="https://in.linkedin.com/in/neerajkumar2013/"><img src="/assets/images/linkedin.png"/></a></p><P><a href="https://in.linkedin.com/in/neerajkumar2013/">LinkedIn</a></P></h3><hr/><h3><p class="pull-right"><a href="https://github.com/neerajkumar"><img src="/assets/images/github.png"/></a></p><P><a href="https://github.com/neerajkumar" style="color:black;">Github</a></P></h3><hr/><h3><p class="pull-right"><a href="https://twitter.com/bundlexec"><img src="/assets/images/twitter.png"/></a></p><P><a href="https://twitter.com/bundlexec" style="color:#00aced">Twitter</a></P></h3><hr/><h3><p class="pull-right"><a href="https://www.facebook.com/neerajkvns"><img src="/assets/images/facebook.png"/></a></p><P><a href="https://www.facebook.com/neerajkvns" style="color:#3B5998;">Facebook</a></P></h3><hr/></div><div class="sidebar"><ol><li><a href="/articles/2016-12-06-active-resource-changeable/">Active Resource Changeable</a><br/></li><li><a href="/articles/2016-08-23-associate-with-active-resource-associatable/">Associate with ActiveResourceAssociatable</a><br/></li><li><a href="/articles/2016-07-31-roda-versus-rails/">Roda versus Rails</a><br/></li><li><a href="/articles/2014-11-26-is-active-support-concern-really-another-concern/">Is ActiveSupport::Concern really Another Concern?</a><br/></li><li><a href="/articles/2014-09-25-How-To-Wire-Up-Ruby-On-Rails-And-Ampersandjs-As-A-Single-Page-Application/">How To Wire up Ruby on Rails and Ampersand.js As a Single Page Application</a><br/></li><li><a href="/articles/2014-06-18-Smart-Deployment-using-Hubot/">Smart Deployment using Hubot</a><br/></li><li><a href="/articles/2014-03-15-Migration-from-svn-to-git/">Successful Migration from svn to git with history</a><br/></li><li><a href="/articles/2013-12-27-Ruby-oci8_with-rails/">Ruby-oci8 with Rails</a><br/></li></ol></div><!--include about--></div></div><hr/><footer class="footer"><div style="font-size: 13px" class="inner"></div></footer></div><!--le javascript--><!--script(src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js')--><!--script(src= '#{locals.baseUrl}' + '/assets/javascript/jquery-twitter-plugin.js')--><script src="http://blog.neerajk.com/assets/javascript/jquery.min.js"></script><script src="http://blog.neerajk.com/assets/javascript/app.js"></script><script src="http://blog.neerajk.com/assets/bootstrap/js/bootstrap.min.js"></script><script src="http://platform.linkedin.com/in.js"></script><script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
   ga('create', 'UA-82931503-1', 'auto');
   ga('send', 'pageview');
</script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script></body></html>